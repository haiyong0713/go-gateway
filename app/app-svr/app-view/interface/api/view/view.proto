syntax = "proto3";

import "github.com/gogo/protobuf/gogoproto/gogo.proto";
import "go-gateway/app/app-svr/archive/service/api/api.proto";
import "google/protobuf/any.proto";
import "go-gateway/app/app-svr/archive/middleware/v1/preload.proto";
import "git.bilibili.co/bapis/bilibili/pagination/pagination.proto";

package bilibili.app.view.v1;

option go_package          = "api";
option java_multiple_files = true;
option java_package        = "com.bapis.bilibili.app.view.v1";
option objc_class_prefix   = "BAPIAppViewV1";

// View 详情页相关接口
service View {
    // 获取详情页数据
    rpc View(ViewReq) returns (ViewReply);
    // 获取详情页tag数据,cid纬度数据
    rpc ViewTag(ViewTagReq) returns (ViewTagReply);
    // 获取全屏material
    rpc ViewMaterial(ViewMaterialReq) returns (ViewMaterialReply);
    // 视频播放进度相关展示
    rpc ViewProgress(ViewProgressReq) returns (ViewProgressReply);
    // 点击播放器卡片事件
    rpc ClickPlayerCard(ClickPlayerCardReq) returns (NoReply);
    // 点击播放器卡片事件V2
    rpc ClickPlayerCardV2(ClickPlayerCardReq) returns (ClickPlayerCardReply);
    // 短视频下载
    rpc ShortFormVideoDownload(ShortFormVideoDownloadReq) returns (ShortFormVideoDownloadReply);
    // 点击大型活动页预约
    rpc ClickActivitySeason(ClickActivitySeasonReq) returns (NoReply);
    // 合集详情页
    rpc Season(SeasonReq) returns (SeasonReply);
    // 播放器卡片曝光
    rpc ExposePlayerCard(ExposePlayerCardReq) returns (NoReply);
    // 点击签订契约
    rpc AddContract(AddContractReq) returns (NoReply);
    // 推荐流模式
    rpc FeedView(FeedViewReq) returns (FeedViewReply);
    // 缓存列表获取稿件详情页
    rpc CacheView(CacheViewReq) returns (CacheViewReply);
    // 获取chronos配置
    rpc ChronosPkg(ChronosPkgReq) returns (Chronos);
    // 连播
    rpc ContinuousPlay(ContinuousPlayReq) returns (ContinuousPlayReply);
    // 相关推荐信息流
    rpc RelatesFeed(RelatesFeedReq) returns (RelatesFeedReply);
    // 首映稿件
    rpc PremiereArchive(PremiereArchiveReq) returns (PremiereArchiveReply);
    // 预约/取消预约
    rpc Reserve(ReserveReq) returns (ReserveReply);
    // 播放器内相关推荐
    rpc PlayerRelates(PlayerRelatesReq) returns (PlayerRelatesReply);
    //合集活动-打卡/取消打卡 -参与/取消参与
    rpc SeasonActivityRecord(SeasonActivityRecordReq) returns (SeasonActivityRecordReply);
    //合集组件曝光
    rpc SeasonWidgetExpose(SeasonWidgetExposeReq) returns(SeasonWidgetExposeReply);
    //播放页获取稿件秒开地址
    rpc GetArcsPlayer(GetArcsPlayerReq) returns(GetArcsPlayerReply);
}

message ClickPlayerCardReply {
    // message
    string message = 1;
}

message GetArcsPlayerReq{
    //aid +cid
    repeated PlayAv play_avs = 1;
    //秒开参数
    .bilibili.app.archive.middleware.v1.PlayerArgs player_args = 2;
}

// PlayAv
message PlayAv {
    // 稿件aid
    int64 aid = 1 [(gogoproto.moretags) = 'validate:"required,gt=0"'];
    // cid
    int64 cid = 2;
}

message GetArcsPlayerReply {
    repeated ArcsPlayer arcs_player = 1;
}

message ArcsPlayer {
    //aid
    int64 aid = 1;
    //cid - 秒开地址
    map<int64,string> player_info = 2;
}

message SeasonWidgetExposeReply {
    int64 season_id   = 1;  // 合集ID
    int64 activity_id = 2;  // 活动ID
}

message SeasonWidgetExposeReq {
    int64 mid         = 1 [(gogoproto.moretags) = 'validate:"required,gt=0"'];
    int32 type        = 2 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 类型： 1：合集
    int64 season_id   = 3 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 合集ID
    int64 activity_id = 4 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 活动ID
    int64 aid         = 5 [(gogoproto.moretags) = 'validate:"required,gt=0"'];
    int64 cid         = 6 [(gogoproto.moretags) = 'validate:"required,gt=0"'];
    int64 scene       = 7 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 1 弹幕弹窗曝光； 2 合集组件：已失效曝光；3 合集组件：已过期曝光
}

message SeasonActivityRecordReq {
    int64 season_id   = 1 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 合集ID
    int64 activity_id = 2 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 活动ID
    int32 action      = 3 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 1: 报名； 2：取消报名； 3：打卡；4：取消打卡
    int64 aid         = 4 [(gogoproto.moretags) = 'validate:"required,gt=0"'];
    int64 cid         = 5 [(gogoproto.moretags) = 'validate:"required,gt=0"'];
    int64 scene       = 6 [(gogoproto.moretags) = 'validate:"required,gt=0"'];  // 1 弹幕弹窗打卡； 2 合集打卡
    string spmid      = 7;
}

message SeasonActivityRecordReply {
    UgcSeasonActivity activity = 1;
}

message PlayerRelatesReply {
    repeated Relate list = 1;
}

message PlayerRelatesReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    // 来源from
    string from = 3;
    // spmid 当前页面
    string spmid = 4;
    // from_spmid 上级页面
    string from_spmid = 5;
    // 秒开聚合参数
    .bilibili.app.archive.middleware.v1.PlayerArgs player_args = 6;
    // 客户端生成的 session_id
    string session_id = 7;
    // 来自 AI 的 track_id
    string from_track_id = 8;
}

message ReserveReq {
    //预约id
    int64 reserve_id = 1;
    //预约动作：预约-0 取消预约-1
    int64 reserve_action = 2;
    //up主mid
    int64 up_id = 3;
}

message ReserveReply {
    //预约资源
    int64 reserve_id = 1;
}

message PremiereArchiveReq {
    int64 aid = 1;
}

message PremiereArchiveReply {
    Premiere premiere = 1;
    //风控状态
    bool risk_status = 2;
    //风控原因
    string risk_reason = 3;
}

message RelatesFeedReply {
    repeated Relate list = 1;
    // 是否还有下一页
    bool has_next = 2;
    // 分页参数
    bilibili.pagination.PaginationReply pagination = 3;
}

message RelatesFeedReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    // 来源from
    string from = 3;
    // spmid 当前页面
    string spmid = 4;
    // from_spmid 上级页面
    string from_spmid = 5;
    // 秒开聚合参数
    .bilibili.app.archive.middleware.v1.PlayerArgs player_args = 6;
    // 表示当前第几刷的请求
    // 第一刷首次请求 relates_page = 1 （从1开始标号）
    // 其余取值表示连续的刷新请求，每次+1
    // 退出后再进入详情页重新从1开始计数
    int64 relates_page = 7;
    // 客户端生成的 session_id
    string session_id = 8;
    // autoplay
    int32 autoplay = 9;
    // 来自 AI 的 track_id
    string from_track_id = 10;
    // 业务参数，标记商业流量来源
    string biz_extra = 11;
    // 设备类型：透传给ai新激活设备是否出广告
    int64 device_type = 12;
    // ad
    string ad_extra = 13;
    // 分页参数
    bilibili.pagination.Pagination pagination = 14;
    // 记录同一详情页下刷新次数 0,1,2..随刷新次数递增
    int32 refresh_num = 15;
}

message ChronosPkgReq {
    // chronos服务唯一标识
    string service_key = 1;
    // chronos引擎版本
    string engine_version = 2;
    // chronos和Native通讯协议版本
    string message_protocol = 3;
}

message FeedViewReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    // 来源from
    string from = 3;
    // spmid 当前页面
    string spmid = 4;
    // from_spmid 上级页面
    string from_spmid = 5;
    // 秒开聚合参数
    .bilibili.app.archive.middleware.v1.PlayerArgs player_args = 6;
    // 表示当前第几刷的请求
    // 第一刷首次请求 diplay_id = 1 （从1开始标号）
    // 其余取值表示连续的刷新请求，每次+1
    // 退出后再进入详情页重新从1开始计数
    int64 display_id = 7;
    // 客户端生成的 session_id
    string session_id = 8;
    // 播放页样式
    string page_version = 9;
    // 来自 AI 的 track_id
    string from_track_id = 10;
}

message FeedViewItem {
    // 包含完整 view 接口
    ViewReply view = 1;
    // 来自 AI 的 goto 字段
    string goto = 2;
    // 跳转地址含秒开地址
    string uri = 3;
    // 来自 AI 的 track_id
    string track_id = 4;
}

message FeedViewReply {
    repeated FeedViewItem list = 1;
    // 是否还有下一页
    bool has_next = 2;
}

// NoReply 无信息
message NoReply {}

message ViewMaterialReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    //当前cid
    int64 cid = 3;
}

message ViewMaterialReply {
    repeated MaterialRes material_res = 1;
    MaterialLeft material_left        = 2;
}

message MaterialLeft {
    //业务icon
    string icon = 1;
    //文本
    string text = 2;
    //跳转地址
    string url = 3;
    //动效
    //类别 bgm:音乐
    string left_type = 4;
    //返回的对象id
    string param            = 5;
    string operational_type = 6;
    //静态icon
    string static_icon = 7;
}

message MaterialRes {
    int64 id        = 1;
    string icon     = 2;
    string url      = 3;
    int32 typ       = 4;
    string name     = 5;
    string bg_color = 6;
    string bg_pic   = 7;
    int32 jump_type = 8;
}

message ViewTagReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    //当前cid
    int64 cid = 3;
    // spmid 当前页面
    string spmid = 4;
}

message ViewTagReply {
    //播放页展示标签：新话题、赛事标签、笔记标签
    repeated SpecialCell special_cell_new = 1;
    // 半屏音乐icon
    MaterialLeft material_left = 2;
    //笔记数量（和笔记标签是分开的）
    int64 notes_count = 3;
}

// ViewReq 详情页请求参数
message ViewReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    // 来源from
    string from = 3;
    // ai trackid
    string trackid = 4;
    // ad
    string ad_extra = 5;
    // （新版本废弃，统一使用player_args）清晰度qn
    int32 qn = 6;
    // （新版本废弃，统一使用player_args）fnver和fnval标识视频格式
    int32 fnver = 7;
    // （新版本废弃，统一使用player_args）fnver和fnval标识视频格式
    int32 fnval = 8;
    // （新版本废弃，统一使用player_args）返回url是否强制使用域名(非ip地址), 1-http域名
    // 2-https域名
    int32 force_host = 9;
    // （新版本废弃，统一使用player_args）是否需要4k清晰度
    int32 fourk = 10;
    // spmid 当前页面
    string spmid = 11;
    // from_spmid 上级页面
    string from_spmid = 12;
    // autoplay
    int32 autoplay = 13;
    //秒开聚合参数
    .bilibili.app.archive.middleware.v1.PlayerArgs player_args = 14;
    // 播放页样式
    // v1 或空表示传统播放页
    // v2 上下滑模式播放页
    string page_version = 15;
    // 业务参数，标记商业流量来源
    string biz_extra = 16;
    //设备类型：透传给ai新激活设备是否出广告--https://www.tapd.bilibili.co/20055921/prong/stories/view/1120055921002559599
    int64 device_type = 17;
    // 相关推荐无限流, 表示当前第几刷的请求, 此处为第一刷, 首次请求 relates_page = 1 （从1开始标号）
    int64 relates_page = 18;
    // 客户端生成的 session_id
    string session_id = 19;
    // 是否原地播放
    int32 in_feed_play = 20;
    // 播放方式：后台播放-background
    string play_mode = 21;
    // 分页参数
    bilibili.pagination.Pagination pagination = 22;
    //0:表示首次进入详情页或下滑刷新 1: tab下拉2:点击简介3:点击悬浮按钮
    int32 refresh = 23;
    // 记录同一详情页下刷新次数 0,1,2..随刷新次数递增
    int32 refresh_num = 24;
}

//  ViewReply 详情页返回结果
message ViewReply {
    // 稿件信息
    .archive.service.v1.Arc arc = 1;
    // 分p信息
    repeated ViewPage pages = 2;
    // up信息
    OnwerExt owner_ext = 3;
    // 用户和up关系
    ReqUser req_user = 4;
    // tag
    repeated Tag tag = 5;
    // tag对应icon
    map<string, TIcon> t_icon = 6;
    // pgc season
    Season season = 7;
    // 充电排行
    ElecRank elec_rank = 8;
    // 历史进度
    History history = 9;
    // 相关推荐
    repeated Relate relates = 10;
    // 不感兴趣
    Dislike dislike = 11;
    // 播放
    PlayerIcon player_icon = 12;
    // vip active（已废弃--vip服务）
    string vip_active = 13;
    // bvid
    string bvid = 14;
    // 稿件荣誉
    Honor honor = 15;
    // 相关推荐顶部tab
    repeated RelateTab relate_tab = 16;
    // 活动跳转链接
    string activity_url = 17;
    // 稿件bgm
    repeated Bgm bgm = 18;
    // 联合投稿
    repeated Staff staff = 19;
    // 争议信息
    string argue_msg = 20;
    // 短链
    string short_link = 21;
    // 播放实验 1=相关推荐自动播放
    int32 play_param = 22;
    // 标签
    Label label = 23;
    // ugc season
    UgcSeason ugc_season = 24;
    // 设置信息
    Config config = 25;
    // 分享副标题
    string share_subtitle = 26;
    // 互动视频信息
    Interaction interaction = 27;
    // 特殊处理错误码（优先判断，CODE404时读取custom_config，不处理其他数据）
    ECode ecode = 28;
    // 通用配置（404页面使用）
    CustomConfig custom_config = 29;
    // 广告字段
    repeated CM cms = 30;
    // 广告字段
    CMConfig cm_config = 31;
    // 播放页定制tab
    Tab tab = 32;
    // 排行榜
    Rank rank = 33;
    // 免流面板定制
    TFPanelCustomized tf_panel_customized = 34;
    // up主发起活动
    UpAct up_act = 35;
    // 用户装扮
    UserGarb user_garb = 36;
    // 大型活动合集（如果有该字段说明进入大型活动播放页，一切以内部字段为准）
    ActivitySeason activity_season = 37;
    // 评论样式
    string badge_url = 38;
    // 直播预约信息
    LiveOrderInfo live_order_info = 39;
    // 稿件简介v2
    repeated DescV2 desc_v2 = 40;
    // IPad广告字段
    CmIpad cm_ipad = 41;
    //贴纸字段
    repeated ViewMaterial sticker = 42;
    //一键三连动画
    UpLikeImg up_like_img = 43;
    //点赞定制化参数
    LikeCustom like_custom = 44;
    //简介tag
    repeated Tag desc_tag = 45;
    //播放页展示：新话题、s11标签
    SpecialCell special_cell = 46;
    //在看人数控制
    Online online = 47;
    //商业tab改版为框下条, 相关信息
    google.protobuf.Any cm_under_player = 48;
    //潮点视频-必剪
    repeated ViewMaterial video_source = 49;
    //播放页展示标签：新话题、赛事标签、笔记标签
    repeated SpecialCell special_cell_new = 50;
    //首映资源
    PremiereResource premiere = 51;
    // 播放页展示标签 :是否要重新获取
    bool refresh_special_cell = 52;
    // 半屏音乐icon
    MaterialLeft material_left = 53;
    //笔记数量（和笔记标签是分开的）
    int64 notes_count = 54;
    //客户端是否拉起浮层
    PullClientAction pull_action = 55;
    // 稿件展示信息
    ArcExtra arc_extra = 56;
    // 分页参数
    bilibili.pagination.PaginationReply pagination = 57;
    //点赞图标
    LikeAnimation like_animation = 58;
    //评论样式
    ReplyStyle reply_preface = 59;
    //页面刷新
    RefreshPage refresh_page = 60;
    //投币定制化参数
    CoinCustom coin_custom = 61;
}

message CoinCustom {
    // 投币定制toast
    string toast = 1;
}

message RefreshPage {
    //是否支持顶部刷新
    int32 refreshable = 1;
    //悬浮按钮icon类型 1: 回顶2 :刷新
    int32 refresh_icon = 2;
    //“回顶”， “换一换”
    string refresh_text = 3;
    //悬浮按钮出现时机
    float refresh_show = 4;
}

message ReplyStyle {
    // 展示评论入口的样式
    string badge_url  = 1;
    string badge_text = 2;
    // 展示评论入口的类型 1:翻转动效 2:滚动动效 3:轮播文字
    int64 badge_type = 3;
}

message LikeAnimation {
    //点赞Icon
    string like_icon = 1;
    //已点赞Icon
    string liked_icon = 2;
    //点赞动画
    string like_animation = 3;
}

message ArcExtra {
    // 稿件发布地
    string arc_pub_location = 1;
}

message PullClientAction {
    //"note"-笔记
    string type = 1;
    // 浮层拉起：true-拉起 false-不拉起
    bool pull_action = 2;
    // 笔记（note）--note_id
    string params = 3;
}

message GoodsInfo {
    // 商品id
    string goods_id = 1;
    // 商品付费类型
    Category category = 2;
    // 商品价格(分)
    int64 goods_price = 3;
    // 用户是否已付费
    PayState pay_state = 4;
    // 商品名称
    string goods_name = 5;
    // 换算后价格
    string price_fmt = 6;
}

//首映
message PremiereResource {
    //首映资源
    Premiere premiere = 1;
    //预约资源
    PremiereReserve reserve = 2;
    //标题文案资源
    PremiereText text = 3;
}

message PremiereReserve {
    //预约id
    int64 reserve_id = 1;
    //预约人数
    int64 count = 2;
    //是否预约
    bool is_follow = 3;
}

message PremiereText {
    //标题
    string title = 1;
    //副标题
    string subtitle = 2;
    //在线人数文案
    string online_text = 3;
    //在线人数icon
    string online_icon = 4;
    //在线人数icon-夜间
    string online_icon_dark = 5;
    //首映-介绍内容
    string intro_title = 6;
    //首映-介绍icon
    string intro_icon = 7;
    //首映引导-"展开"按钮处展示气泡提醒
    string guidance_pulldown = 8;
    //首映引导-首映室入口处展示气泡提醒
    string guidance_entry = 9;
    //首映-介绍icon-夜间
    string intro_icon_night = 10;
}

message Premiere {
    //首映状态
    PremiereState premiere_state = 1;
    //首映开始时间
    int64 start_time = 2;
    //服务端当前时间
    int64 service_time = 3;
    //聊天室id
    int64 room_id = 4;
}

enum PremiereState {
    premiere_none   = 0;  // 未知
    premiere_before = 1;  // 首映前(系统时间<首映开始时间)
    premiere_in     = 2;  // 首映中
    premiere_after  = 3;  // 首映已结束(系统时间>首映开始时间+视频时长)
}

// 连播请求参数
message ContinuousPlayReq {
    // aid
    int64 aid = 1 [(gogoproto.moretags) = 'validate:"gt=0,required"'];
    // 来源from
    string from = 2;
    // ai trackid
    string trackid = 3;
    // spmid 当前页面
    string spmid = 4;
    // from_spmid 上级页面
    string from_spmid = 5;
    // autoplay
    int32 autoplay = 6;
    // 秒开用参数
    .bilibili.app.archive.middleware.v1.PlayerArgs player_args = 7;
    //设备类型
    int64 device_type = 8;
    //标识一个连播页面
    string session_id = 9;
    //表示当前第几刷的请求
    int64 display_id = 10;
}

//  ContinuousPlayReply 连播返回结果
message ContinuousPlayReply {
    // 相关推荐
    repeated Relate relates = 1;
}

// CacheViewReq 详情页请求参数
message CacheViewReq {
    // aid aid和bvid不同时为空
    int64 aid = 1;
    // bvid aid和bvid不同时为空
    string bvid = 2;
    // 来源from
    string from = 3;
    // spmid 当前页面
    string spmid = 4;
    // from_spmid 上级页面
    string from_spmid = 5;
}

//  CacheViewReply 详情页返回结果
message CacheViewReply {
    // 稿件信息
    .archive.service.v1.Arc arc = 1;
    // 分p信息
    repeated ViewPage pages = 2;
    // up信息
    OnwerExt owner_ext = 3;
    // 用户和up关系
    ReqUser req_user = 4;
    // pgc season
    Season season = 5;
    // 充电排行
    ElecRank elec_rank = 6;
    // 历史进度
    History history = 7;
    // 不感兴趣
    Dislike dislike = 8;
    // 播放
    PlayerIcon player_icon = 9;
    // bvid
    string bvid = 10;
    // 短链
    string short_link = 11;
    // 分享副标题
    string share_subtitle = 12;
    // 免流面板定制
    TFPanelCustomized tf_panel_customized = 13;
    //在看人数控制
    Online online = 14;
}

message Online {
    //总开关, 是否能展示在看人数, true展示
    bool online_show = 1;
    //在看人数展示logo
    string player_online_logo = 2;
}

message LikeCustom {
    //开关：是否屏蔽该功能 && 视频播放量>配置参数
    bool like_switch = 1;
    //全屏切非全屏进度：返回整型，如80
    int64 full_to_half_progress = 2;
    //非全屏状态：返回整型，如80
    int64 non_full_progress = 3;
    //更新次数:服务端配置
    int64 update_count = 4;
}

message UpLikeImg {
    //蓄力动画
    string pre_img = 1;
    //成功动画
    string suc_img = 2;
    //定制语
    string content = 3;
    // type=1,mid维度;type=2,avid维度
    int64 type = 4;
}

message ViewMaterial {
    //对象id:如果是sticker(贴纸)则为贴纸id，bgm则为sid
    int64 oid = 1;
    // mid
    int64 mid = 2;
    //标题
    string title = 3;
    // up主名称
    string author = 4;
    //跳转url
    string jumpUrl = 5;
}

message CmIpad {
    CM cm                             = 1;
    .archive.service.v1.Author author = 2;
    .archive.service.v1.Stat stat     = 3;
    int64 duration                    = 4;
    int64 aid                         = 5;
}

//直播预约信息
message LiveOrderInfo {
    // 预约id
    int64 sid = 1;
    // 预约条文案
    string text = 2;
    // 直播开始时间
    int64 live_plan_start_time = 3;
    // 是否预约
    bool is_follow = 4;
}

// 大型活动合集
message ActivitySeason {
    // 稿件信息
    .archive.service.v1.Arc arc = 1;
    // 分p信息
    repeated ViewPage pages = 2;
    // up信息
    OnwerExt owner_ext = 3;
    // 用户和up关系
    ReqUser req_user = 4;
    // 充电排行
    ElecRank elec_rank = 5;
    // 历史进度
    History history = 6;
    // bvid
    string bvid = 7;
    // 稿件荣誉（icon和色值类，优先走mod资源包）
    Honor honor = 8;
    // 联合投稿
    repeated Staff staff = 9;
    // ugc season
    UgcSeason ugc_season = 10;
    // 播放页定制tab（icon和色值类，优先走mod资源包）
    Tab tab = 11;
    // 排行榜（icon和色值类，优先走mod资源包）
    Rank rank = 12;
    // 预约模块
    Order order = 13;
    // 是否支持点踩
    bool support_dislike = 14;
    // 相关推荐（运营配置+AI推荐）
    OperationRelate operation_relate = 15;
    // 活动页资源包
    ActivityResource activity_resource = 16;
    // 分享短链
    string short_link = 17;
    // 标签
    Label label = 18;
    // 不感兴趣
    Dislike dislike = 19;
    // 播放
    PlayerIcon player_icon = 20;
    // 分享副标题
    string share_subtitle = 21;
    // 广告字段
    CMConfig cm_config = 22;
    // 免流面板定制
    TFPanelCustomized tf_panel_customized = 23;
    // 争议信息
    string argue_msg = 24;
    // 特殊处理错误码（优先判断，CODE404时读取custom_config，不处理其他数据）
    ECode ecode = 25;
    // 通用配置（404页面使用）
    CustomConfig custom_config = 26;
    // 评论样式
    string badge_url = 27;
    // 稿件简介v2
    repeated DescV2 desc_v2 = 28;
    //设置信息
    Config config = 29;
    //在看人数控制
    Online online = 30;
    // 稿件展示信息
    ArcExtra arc_extra = 31;
    //评论样式
    ReplyStyle reply_preface = 32;
}

// 活动页资源包
message ActivityResource {
    // mod资源池名称
    string mod_pool_name = 1;
    // mod资源名称
    string mod_resource_name = 2;
    // 背景色
    string bg_color = 3;
    // 选中背景色
    string selected_bg_color = 4;
    // 文字颜色
    string text_color = 5;
    // 浅字色
    string light_text_color = 6;
    // 深字色
    string dark_text_color = 7;
    // 分割线色
    string divider_color = 8;
}

//  相关推荐（运营配置+AI推荐）
message OperationRelate {
    // 模块标题（如相关推荐）
    string title = 1;
    // 相关推荐模块内容
    repeated RelateItem relate_item = 2;
    // AI相关推荐
    repeated Relate ai_relate_item = 3;
}

// 相关推荐内容
message RelateItem {
    // 跳链
    string url = 1;
    // 封面
    string cover = 2;
}

// 预约模块
message Order {
    // 用户操作态 true已操作 false未操作
    bool status = 1;
    // 模块标题
    string title = 2;
    // 按钮文字 未操作
    string button_title = 3;
    // 按钮文字 已操作
    string button_selected_title = 4;
    // 合集播放数
    int64 season_stat_view = 5;
    // 合集弹幕数
    int64 season_stat_danmaku = 6;
    // 预约类型（点击时透传，直播开始前预约活动，直播开始后收藏合集）
    BizType order_type = 7;
    // 预约业务参数
    oneof order_param {
        // 预约活动参数
        BizReserveActivityParam reserve = 8;
        // 收藏合集参数
        BizFavSeasonParam fav_season = 9;
    }
    // 合集简介
    string intro = 10;
}

// 业务类型
enum BizType {
    BizTypeNone = 0;
    // 追番追剧
    BizTypeFollowVideo = 1;
    // 预约活动
    BizTypeReserveActivity = 2;
    // 跳转链接
    BizTypeJumpLink = 3;
    // 收藏合集
    BizTypeFavSeason = 4;
    // 预约游戏
    BizTypeReserveGame = 5;
}

// 用户装扮相关信息
message UserGarb {
    //点赞动画
    string urlImageAniCut = 1;
    //点赞toast
    string likeToast = 2;
}

message Rank {
    // 排行榜icon
    string icon = 1;
    // 排行榜icon-夜间模式
    string icon_night = 2;
    // 排行榜文案
    string text = 3;
}

message Tab {
    // 背景图片
    string background = 1;
    // 跳转类型
    TabOtype otype = 2;
    // 类型对应id
    int64 oid = 3;
    // 跳转链接
    string uri = 4;
    // 样式
    TabStyle style = 5;
    // 文字
    string text = 6;
    // 未选中态字色
    string text_color = 7;
    // 选中态字色
    string text_color_selected = 8;
    // 图片
    string pic = 9;
    // ID-后台配置自增
    int64 id = 10;
    // 商业tab extra信息
    google.protobuf.Any ad_tab_info = 11;
}

enum TabStyle {
    // 未知样式
    UnknownStyle = 0;
    // 文字样式
    Text = 1;
    // 图片样式
    Pic = 2;
}

enum TabOtype {
    // 未知类型
    UnknownOtype = 0;
    // url链接
    URL = 1;
    // native话题活动
    TopicNA = 2;
    // 商业tab
    CmURI = 3;
}

enum ECode {
    DEFAULT = 0;
    CODE404 = 1;
}

message ViewPage {
    .archive.service.v1.Page page = 1;
    Audio audio                   = 2;
    DM dm                         = 3;
    string download_title         = 4;
    string download_subtitle      = 5;
}

message Audio {
    string title      = 1;
    string cover_url  = 2;
    int64 song_id     = 3;
    int64 play_count  = 4;
    int64 reply_count = 5;
    int64 upper_id    = 6;
    string entrance   = 7;
    int64 song_attr   = 8;
}

message DM {
    bool closed    = 1;
    bool real_name = 2;
    int64 count    = 3;
}

message OnwerExt {
    OfficialVerify official_verify = 1;
    Live live                      = 2;
    Vip vip                        = 3;
    repeated int64 assists         = 4;
    int64 fans                     = 5;
    string arc_count               = 6;
}

message OfficialVerify {
    int32 type  = 1;
    string desc = 2;
}

message Live {
    int64 mid          = 1;
    int64 roomid       = 2;
    string uri         = 3;
    string endpage_uri = 4;
}

message Vip {
    int32 type             = 1;
    int64 due_date         = 2;
    string due_remark      = 3;
    int32 access_status    = 4;
    int32 vip_status       = 5;
    string vip_status_warn = 6;
    int32 theme_type       = 7;
    VipLabel label         = 8;
}

message VipLabel {
    string path        = 1;
    string text        = 2;
    string label_theme = 3;
}

message ReqUser {
    // 用户是否关注up
    int32 attention = 1;
    // 用户是否关注up
    int32 guest_attention = 2;
    // 是否收藏
    int32 favorite = 3;
    // 是否点赞
    int32 like = 4;
    // 是否点踩
    int32 dislike = 5;
    // 是否投币
    int32 coin = 6;
    // 关注等级（引导动效）
    int32 attention_level = 7;
    // 是否收藏合集
    int32 fav_season = 8;
    // 充电+按钮(仅在up主开通了充电+情况下有)
    Button elec_plus_btn = 9;
}

message Tag {
    int64 id        = 1;
    string name     = 2;
    int64 likes     = 3;
    int64 hates     = 4;
    int32 liked     = 5;
    int32 hated     = 6;
    string uri      = 7;
    string tag_type = 8;
}

message SpecialCell {
    //业务icon
    string icon = 1;
    //业务icon-夜间
    string icon_night = 2;
    //文本
    string text = 3;
    //文本颜色
    string text_color = 4;
    //文本颜色-夜间
    string text_color_night = 5;
    //跳转地址
    string jump_url = 6;
    // cell类型 s11 topic(话题) active（活动）bgm(音乐)
    string cell_type = 7;
    // cell背景颜色
    string cell_bgcolor = 8;
    // cell背景颜色-夜间
    string cell_bgcolor_night = 9;
    //返回的对象id
    string param = 10;
    //页面title
    string page_title = 11;
    //跳转类型：fluid-半屏浮层 new_page-跳转新页面
    string jump_type = 12;
    //结束icon
    string end_icon = 13;
    //结束icon夜间
    string end_icon_night = 14;
    //笔记数量
    int64 notes_count = 15;
}

message TIcon {
    string icon = 1;
}

message Season {
    string allow_download  = 1;
    int64 season_id        = 2;
    int32 is_jump          = 3;
    string title           = 4;
    string cover           = 5;
    int32 is_finish        = 6;
    int64 newest_ep_id     = 7;
    string newest_ep_index = 8;
    int64 total_count      = 9;
    int32 weekday          = 10;
    UserSeason user_season = 11;
    SeasonPlayer player    = 12;
    string ogv_playurl     = 13;
}

message UserSeason {
    string attention = 1;
}

message SeasonPlayer {
    int64 aid   = 1;
    string vid  = 2;
    int64 cid   = 3;
    string from = 4;
}

message ElecRank {
    repeated ElecRankItem list = 1;
    int64 count                = 2;
    //充电鸣谢文案: 人为我充电
    string text = 3;
}

message ElecRankItem {
    string avatar   = 1;
    string nickname = 2;
    string message  = 3;
    int64 mid       = 4;
}

message History {
    int64 cid      = 1;
    int64 progress = 2;
}

message Relate {
    int64 aid                         = 1;
    string pic                        = 2;
    string title                      = 3;
    .archive.service.v1.Author author = 4;
    .archive.service.v1.Stat stat     = 5;
    int64 duration                    = 6;
    string goto                       = 7;
    string param                      = 8;
    string uri                        = 9;
    string jump_url                   = 10;
    double rating                     = 11;
    string reserve                    = 12;
    string from                       = 13;
    string desc                       = 14;
    string rcmd_reason                = 15;
    string badge                      = 16;
    int64 cid                         = 17;
    int32 season_type                 = 18;
    int32 rating_count                = 19;
    string tag_name                   = 20;
    PackInfo pack_info                = 21;
    Notice notice                     = 22;
    Button button                     = 23;
    string trackid                    = 24;
    //游戏卡片新样式
    int32 new_card = 25;
    //推荐理由样式
    ReasonStyle rcmd_reason_style = 26;
    string cover_gif              = 27;
    // 广告卡字段
    CM cm = 28;
    // 游戏卡字段
    int64 reserve_status = 29;
    //"相关推荐原因":特殊小卡使用
    string rcmd_reason_extra = 30;
    //相关推荐三点
    RecThreePoint rec_three_point = 31;
    //运营卡: 投放ID
    string unique_id = 32;
    //运营卡: 物料ID
    int64 material_id = 33;
    //from_source_type
    int64 from_source_type = 34;
    //from_source_id
    string from_source_id = 35;
    //dimension
    .archive.service.v1.Dimension dimension = 36;
    //游戏卡: 16:9封面
    string cover = 37;
    //粉标
    ReasonStyle badge_style = 38;
    //强化角标
    PowerIconStyle power_icon_style = 39;
    //游戏卡: 游戏状态文案
    string reserve_status_text = 40;
    //dislike上报
    string dislike_report_data = 41;
    //rank_info 游戏
    RankInfo rank_info_game = 42;
    // 稿件首p首帧
    string first_frame = 43;
}

message RankInfo {
    //晚间icon链接
    string icon_url_night = 1;
    //日间icon链接
    string icon_url_day = 2;
    //标签晚间底色
    string bkg_night_color = 3;
    //标签日间底色
    string bkg_day_color = 4;
    //文案晚间底色
    string font_night_color = 5;
    //文案日间底色
    string font_day_color = 6;
    //榜单文案
    string rank_content = 7;
    //榜单落地页
    string rank_link = 8;
}

message PowerIconStyle {
    // 强化角标日间模式
    string icon_url = 1;
    // 强化角标夜间模式
    string icon_night_url = 2;
    // 强化角标 宽度
    int64 icon_width = 3;
    // 强化角标 高度
    int64 icon_height = 4;
}

//相关推荐三点
message RecThreePoint {
    //我不想看
    RecDislike dislike = 1;
    //反馈
    RecDislike feedback = 2;
    //是否稍后再看
    bool watch_later = 3;
}

message RecDislike {
    //标题
    string title = 1;
    //普通子标题
    string sub_title = 2;
    //关闭个性化推荐子标题
    string closed_sub_title = 3;
    //普通模式撤销条文案
    string paste_text = 4;
    //关闭个性化推荐模式撤销条文案
    string closed_paste_text = 5;
    //反馈标签
    repeated DislikeReasons dislike_reason = 6;
    //普通模式toast文案
    string toast = 7;
    //关闭个性化推荐模式toast文案
    string closed_toast = 8;
}

// BadgeStyle 角标
message BadgeStyle {
    // 角标文案
    string text = 1;
    // 文案日间色值
    string text_color = 2;
    // 文案夜间色值
    string text_color_night = 3;
    // 背景日间色值
    string bg_color = 4;
    // 背景夜间色值
    string bg_color_night = 5;
    // 边框日间色值
    string border_color = 6;
    // 边框夜间色值
    string border_color_night = 7;
    // 角标样式：1为填充模式；2位镂空模式
    int32 bg_style = 8;
}

message ReasonStyle {
    string text = 1;
    // 日间模式
    string text_color   = 2;
    string bg_color     = 3;
    string border_color = 4;
    // 夜间模式
    string text_color_night   = 5;
    string bg_color_night     = 6;
    string border_color_night = 7;
    // 1:填充 2:描边 3:填充 + 描边 4:背景不填充 + 背景不描边
    int32 bg_style = 8;
    int32 selected = 9;
}

message PackInfo {
    string title = 1;
    string uri   = 2;
}

message Notice {
    string title = 1;
    string desc  = 2;
}

message Button {
    string title = 1;
    string uri   = 2;
    string icon = 3;
}

message Dislike {
    string title                    = 1;
    string subtitle                 = 2;
    repeated DislikeReasons reasons = 3;
}

message DislikeReasons {
    int64 id     = 1;
    int64 mid    = 2;
    int32 rid    = 3;
    int64 tag_id = 4;
    string name  = 5;
}

message PlayerIcon {
    string url1           = 1;
    string hash1          = 2;
    string url2           = 3;
    string hash2          = 4;
    string drag_left_png  = 5;  //icon左拖拽静态图
    string middle_png     = 6;  //icon居中静态图
    string drag_right_png = 7;  //icon右拖拽静态
    IconData drag_data    = 8;  // 拖拽meat.json & 雪碧图
    IconData nodrag_data  = 9;  // 非拖拽meta.json & 雪碧图
}

message IconData {
    string meta_json  = 1;  // meta.json
    string sprits_img = 2;  // 雪碧图
}

message CM {
    google.protobuf.Any source_content = 1;
}

message AdInfo {
    int64 creative_id                = 1;
    int64 creative_type              = 2;
    CreativeContent creative_content = 3;
    string ad_cb                     = 4;
    int32 card_type                  = 5;
    bytes Extra                      = 6;
}

message CreativeContent {
    string title        = 1;
    string description  = 2;
    string button_title = 3;
    int64 video_id      = 4;
    string username     = 5;
    string image_url    = 6;
    string image_md5    = 7;
    string log_url      = 8;
    string log_md5      = 9;
    string url          = 10;
    string click_url    = 11;
    string show_url     = 12;
}

message CMConfig {
    google.protobuf.Any ads_control = 1;
}

message Asset {
    int32 paid           = 1;
    int64 price          = 2;
    AssetMsg msg         = 3;
    AssetMsg preview_msg = 4;
}

message AssetMsg {
    string desc1 = 1;
    string desc2 = 2;
}

message Bgm {
    int64 sid       = 1;
    int64 mid       = 2;
    string title    = 3;
    string author   = 4;
    string jump_url = 5;
    string cover    = 6;
}

message Staff {
    int64 mid                      = 1;
    string title                   = 2;
    string face                    = 3;
    string name                    = 4;
    OfficialVerify official_verify = 5;
    Vip vip                        = 6;
    int32 attention                = 7;
    int32 label_style              = 8;
}

message Label {
    // 标签类型 1-热门 2-活动 3-互动视频（627开始默认0，不区分类型由服务端下发图片）
    int32 type = 1;
    // 标签跳转url（可能无）
    string uri = 2;
    // 标签图标
    string icon = 3;
    // 标签夜间图标
    string icon_night = 4;
    // 标签图标宽
    int64 icon_width = 5;
    // 标签图标高
    int64 icon_height = 6;
    // 动图（日间）-首映使用
    string lottie = 7;
    // 动图（夜间）-首映使用
    string lottie_night = 8;
}

enum SeasonType {
    Unknown = 0;
    Base    = 1;
    Good    = 2;
}

message UgcSeason {
    // 合集id
    int64 id = 1;
    // 合集标题
    string title = 2;
    // 合集封面
    string cover = 3;
    // 合集简介
    string intro = 4;
    // 小节信息
    repeated Section sections = 5;
    // 合集计数
    UgcSeasonStat stat = 6;
    // 标签文案（如签约、独家）
    string label_text = 7;
    // 标签字色
    string label_text_color = 8;
    // 标签背景色
    string label_bg_color = 9;
    // 标签夜间字色
    string label_text_night_color = 10;
    // 标签夜间背景色
    string label_bg_night_color = 11;
    // 右侧描述文案（如查看更多）
    string desc_right = 12;
    // 单集数量
    int64 ep_count         = 13;
    SeasonType season_type = 14;
    //是否展示连播按钮:iPad端基础合集情况下使用
    bool show_continual_button = 15;
    // 付费合集，预期总共的视频数量，实际epCount可能会大于epNum
    int64 ep_num = 16;
    // 是否付费合集
    bool season_pay = 17;
    // 合集绑定商品信息
    GoodsInfo goods_info = 18;
    // 按钮：立即购买/已购买
    ButtonStyle pay_button = 19;
    // 新标签文案，(付费,签约，独家)
    string label_text_new = 20;
    //合集活动-打卡活动
    UgcSeasonActivity activity = 21;
    //合集能力值
    repeated string season_ability = 22;
}
//合集活动-打卡活动
message UgcSeasonActivity {
    int32 type                 = 1;                                                         // 类型： 1：合集
    int64 oid                  = 2;                                                         //1: 合集ID
    int64 activity_id          = 3;                                                         //活动id
    string title               = 4;                                                         //标题
    string intro               = 5;                                                         //简介
    int32 day_count            = 6;                                                         //活动天数
    int32 user_count           = 7;                                                         //参与人数
    int64 join_deadline        = 8 [(gogoproto.casttype) = "go-common/library/time.Time"];  // 报名截止时间
    int64 activity_deadline    = 9 [(gogoproto.casttype) = "go-common/library/time.Time"];  // 活动截止时间
    int32 checkin_view_time    = 10;                                                        // 打卡观看时长要求
    bool new_activity          = 11;                                                        // 是否有新活动
    UserActivity user_activity = 12;                                                        // 用户&活动相关数据
    SeasonShow season_show     = 13;
}

message UserActivity {
    int32 user_state        = 1;                                                         // 用户参与状态：0：未参与；1：进行中；2：已完成；3：已取消；4：任务过期未完成；5：任务过期未完成
    int64 last_checkin_date = 2 [(gogoproto.casttype) = "go-common/library/time.Time"];  // 最后打卡日期
    int32 checkin_today     = 3;                                                         // 1. 今日未打卡；2. 今日已打卡；
    int32 user_day_count    = 4;                                                         // 用户打卡天数
    int32 user_view_time    = 5;                                                         // 用户累计时长
    string portrait         = 6;                                                         // 用户头像
}

message SeasonShow {
    // 按钮文案，需支持可配置，包括参与、已参与、再次参与、已过期、已失效。
    string button_text = 1;
    // 1. 未报名
    // 打卡天数：用于提示观众打卡，审核通过后不可修改，显示为“X天打卡”
    // XXX人已参与：<100人点击参与，显示为“快来参与打卡吧~！”，>=100人显示实际点击“参与”的用户数（不是当前参与的人数，而是参与的总人数），人数只增不减，一个帐号最多算1次。
    // 2. 已报名
    // 2022-07-31活动结束；xx人正和你一起加油。
    string join_text = 2;
    // 每天观看合集中的视频超过30秒，即可完成当日打卡。
    string rule_text = 3;
    // 今日未打卡 + 再坚持一下就完成了！
    // 今日已打卡 + 表现很棒！继续加油
    // 完成打卡、且在活动报名期间： 太棒了！你完成了全部打卡 + 你还可以选择继续参与哦
    // 完成打卡、不在活动报名期间： 太棒了！你完成了全部打卡 + 感谢参与
    // 活动已结束 且有新的活动：当前打卡已结束 + 可以试试新的打卡
    // 活动已结束 未完成全部打卡：当前打卡已结束 + 下次加油吧
    string checkin_text   = 4;
    string checkin_prompt = 5;
}

message ButtonStyle {
    //按钮文案
    string text = 1;
    //按钮字体色值
    string text_color = 2;
    //按钮字体色值-夜间
    string text_color_night = 3;
    //按钮背景色
    string bg_color = 4;
    //按钮背景色-夜间
    string bg_color_night = 5;
    //链接 为空表示不下发 不为空表示下发
    string jump_link = 6;
}

message UgcSeasonStat {
    // 合集id
    int64 season_id = 1;
    // 播放数
    int32 view = 2;
    // 弹幕数
    int32 danmaku = 3;
    // 评论数
    int32 reply = 4;
    // 收藏数
    int32 fav = 5;
    // 投币数
    int32 coin = 6;
    // 分享数
    int32 share = 7;
    // 当前排名
    int32 now_rank = 8;
    // 历史最高排名
    int32 his_rank = 9;
    // 点赞数
    int32 like = 10;
}

message Section {
    // 小节id
    int64 id = 1;
    // 小节标题
    string title = 2;
    // 小节类型 0其他 1正片
    int64 type = 3;
    // 单集
    repeated Episode episodes = 4;
}

message Episode {
    // 单集id
    int64 id = 1;
    // 单集aid
    int64 aid = 2;
    // 单集cid
    int64 cid = 3;
    // ep's title
    string title = 4;
    // arc's cover
    string cover = 5;
    // 封面右下角文案
    string cover_right_text = 6;
    // archive's page
    .archive.service.v1.Page page = 7;
    // archive's stat
    .archive.service.v1.Stat stat = 8;
    // 单集对应bvid
    string bvid = 9;
    // archive's author
    .archive.service.v1.Author author = 10;
    // 带联合投稿描述文案
    string author_desc = 11;
    // 角标, 付费
    BadgeStyle badge_style = 12;
    // 是否需要付费
    bool need_pay = 13;
    // 是否属于付费稿件
    bool episode_pay = 14;
    // 是否为免费稿件
    bool free_watch = 15;
    // 稿件首p首帧
    string first_frame = 16;
}

message Config {
    string relates_title = 1;
    int32 relates_style  = 2;
    int32 relate_gif_exp = 3;
    int32 end_page_half  = 4;
    int32 end_page_full  = 5;
    bool auto_swindow    = 6;
    bool popup_info      = 7;
    //小窗口自动播放 abtest："open"-打开 "keep"-保持
    string abtest_small_window = 8;
    //相关推荐三点类型：0-旧样式 1-新样式
    int32 rec_three_point_style = 9;
    //是否要展示绝对时间
    bool is_absolute_time = 10;
    //是否启用新小窗
    bool new_swindow = 11;
    //是否启用相关推荐双列展示
    bool relates_biserial = 12;
    // 听视频相关配置
    ListenerConfig listener_conf = 13;
    //相关推荐无限下拉, default或者空为旧版本, v1单列, v2双列
    string relates_feed_style = 14;
    //相关推荐无限下拉, 是否出新手引导
    bool relates_feed_popup = 15;
    //相关推荐无限下拉, 标记是否能进行下一个请求
    bool relates_has_next = 16;
    //1命中相关推荐原地播放实验组
    int32 local_play = 17;
    //命中实验竖屏稿件全屏默认进Story
    bool play_story = 18;
    //当前视频竖屏稿件全屏进Story
    bool arc_play_story = 19;
    // 命中实验竖屏稿件全屏默认进Story icon
    string story_icon = 20;
    //命中实验横屏稿件全屏默认进Story
    bool landscape_story = 21;
    //当前视频横屏稿件全屏进Story
    bool arc_landscape_story = 22;
    // 命中实验横屏稿件全屏默认进Story icon
    string landscape_icon = 23;
    // 播放页是否展示听视频按钮
    bool show_listen_button = 24;
}

// 听视频相关配置
message ListenerConfig {
    // 跳转形式 0-跳转独立容器 1-跳转半屏面板
    // 客户端对于未知/暂未支持的枚举直接跳转容器
    // 这个控制选项对三点跳转和引导条跳转都生效
    int64 jump_style = 1;
    // 引导条配置
    ListenerGuideBar guide_bar = 2;
}

// 听视频引导条
message ListenerGuideBar {
    // 引导条展示形式
    // 0-不展示
    // 1-立即展示（不考虑任何其他参数）
    // 2-按后台播放策略决定展示（检查background_time参数）
    // 客户端对于未知的枚举类型，统一按不展示处理
    int64 show_strategy = 1;
    // 头部图标
    string icon = 2;
    // 引导条文案
    string text = 3;
    // 引导条按钮
    string btn_text = 4;
    // 引导条展示时间（倒计时样式）
    int64 show_time = 5;
    // 后台播放策略：后台播放多久后展示引导条
    int64 background_time = 6;
}

message Interaction {
    Node history_node   = 1;
    int64 graph_version = 2;
    string msg          = 3;
    // 预留字段，暂时无值
    string evaluation = 4;
    int64 mark        = 5;
}

message Honor {
    // 图标
    string icon = 1;
    // 夜间图标
    string icon_night = 2;
    // 文案
    string text = 3;
    // 附属文案（如收录）
    string text_extra = 4;
    // 文案颜色
    string text_color = 5;
    // 文案夜间颜色
    string text_color_night = 6;
    // 背景色
    string bg_color = 7;
    // 夜间背景色
    string bg_color_night = 8;
    // 跳转链接
    string url = 9;
    // 跳转链接文案
    string url_text = 10;
}

// RelateTab
message RelateTab {
    string id    = 1;
    string title = 2;
}

message UpAct {
    int64 sid        = 1;
    int64 mid        = 2;
    string title     = 3;
    string statement = 4;
    string image     = 5;
    string url       = 6;
    string button    = 7;
}

message Node {
    int64 node_id = 1;
    string title  = 2;
    int64 cid     = 3;
}

message ViewProgressReq {
    // 稿件aid
    int64 aid = 1 [(gogoproto.moretags) = 'validate:"gt=0,required"'];
    // 视频cid
    int64 cid = 2 [(gogoproto.moretags) = 'validate:"gt=0,required"'];
    // 稿件up主mid
    int64 up_mid = 3;
    // chronos引擎版本
    string engine_version = 4;
    // chronos和Native通讯协议版本
    string message_protocol = 5;
    // chronos服务唯一标识
    string service_key = 6;
}

message ViewProgressReply {
    // 视频引导信息
    VideoGuide video_guide = 1;
    // Chronos灰度管理
    Chronos chronos = 2;
    //缩略图
    VideoShot arc_shot = 3;
    //高能看点
    repeated VideoPoint points = 4;
    //高能看点定制素材
    PointMaterial point_material = 5;
    //高能看点-分段章节 进度条是否常驻
    bool point_permanent = 6;
    // 热梗视频展示配置时间段
    repeated BuzzwordConfig buzzword_periods = 7;
}

message PointMaterial {
    //素材地址
    string url = 1;
    //素材来源
    MaterialSource material_source = 2;
}

enum MaterialSource {
    Default = 0;
    //必剪
    BiJian = 1;
}

//缩略图
message VideoShot {
    //定位文件
    string pv_data = 1;
    //一行多少小图
    int32 img_x_len = 2;
    //一列多少小图
    int32 img_y_len = 3;
    //缩略图宽
    int32 img_x_size = 4;
    //缩略图高
    int32 img_y_size = 5;
    //图片URL
    repeated string image = 6;
}

//高能看点
message VideoPoint {
    //看点类型
    int32 type = 1;
    //视频看点开始时间点（单位：秒）
    int64 from = 2;
    //视频看点结束时间点（单位：秒）
    int64 to = 3;
    //看点的内容
    string content = 4;
    //看点封面
    string cover = 5;
    //看点图片(半屏不展示)
    string logo_url = 6;
}

// Chronos灰度管理
message Chronos {
    // md5资源校验信息
    string md5 = 1;
    // 资源地址
    string file = 2;
    // sign资源校验信息
    string sign = 3;
}

message VideoGuide {
    // 关注展现
    repeated Attention attention = 1;
    // 指令弹幕
    repeated CommandDm commandDms = 2;
    // 运营卡片（6.13及以前版本使用）
    repeated OperationCard operation_card = 3;
    // 新运营卡片（6.14开始使用）
    repeated OperationCardNew operation_card_new = 4;
    // 契约卡
    ContractCard contract_card = 5;
    // cards_v2 运营卡v2
    repeated OperationCardV2 cards_second = 6;
}

// OperationCardV2 运营卡V2
message OperationCardV2 {
    // 卡片id
    int64 id = 1;
    // from 开始时间
    int32 from = 2;
    // to 结束时间
    int32 to = 3;
    // 用户操作态 true已操作 false未操作
    bool status = 4;
    // 业务类型
    BizType biz_type = 5;
    // 卡片内容
    OperationCardV2Content content = 6;
    // 业务参数，根据biz_type来取值
    oneof param {
        // 追番追剧参数
        BizFollowVideoParam follow = 7;
        // 预约活动参数
        BizReserveActivityParam reserve = 8;
        // 跳转参数
        BizJumpLinkParam jump = 9;
        // 预约游戏参数
        BizReserveGameParam game = 10;
    }
}

// OperationCardV2Content 运营卡v2内容
message OperationCardV2Content {
    // 卡片文案
    string title = 1;
    // 副标题
    string subtitle = 2;
    // icon 图标url
    string icon = 3;
    // 未操作的按钮文字
    string button_title = 4;
    // 已操作的按钮文字
    string button_selected_title = 5;
    // 已操作态是否显示
    bool show_selected = 6;
}

// ContractCard 契约卡
message ContractCard {
    // 需要触发的播放进度百分比
    float display_progress = 1;
    // 触发位置的前后误差（单位 毫秒）
    int64 display_accuracy = 2;
    // 展示持续时间 (单位 毫秒)
    int64 display_duration = 3;
    // 弹出模式(0: 原有模式；1: 半屏弹出；2: 全屏、半屏均弹出)
    int32 show_mode = 4;
    // 提示页面(0: 原有页面；1: 6.23版本新页面；)
    int32 page_type = 5;
    // UP主信息
    UpperInfos upper = 6;
    // 关注是否展示契约
    int32 is_follow_display = 7;
    //契约者文案下发
    ContractText text = 8;
    // 视频关注卡展示时间 距离视频结束的时间 (单位 毫秒)
    int64 follow_display_end_duration = 9;
    // 播放场景是否展示
    int32 is_play_display = 10;
    // 互动场景是否展示
    int32 is_interact_display = 11;
    // 契约卡触发场景开关
    bool play_display_switch = 12;
}

message ContractText {
    //主文案
    string title = 1;
    //副文案
    string subtitle = 2;
    //播放页内文案
    string inline_title = 3;
}

message UpperInfos {
    // 粉丝数
    int64 fans_count = 1;
    // 近半年投稿数
    int64 arc_count_last_half_year = 2;
    // 成为up主时间
    int64 first_up_dates = 3;
    // 总播放量
    int64 total_play_count = 4;
}

message OperationCardNew {
    // 卡片唯一id（点击操作时带回）
    int64 id = 1;
    // from 开始时间
    int32 from = 2;
    // to 结束时间
    int32 to = 3;
    // 用户操作态 true已操作 false未操作
    bool status = 4;
    // 卡片样式
    OperationCardType card_type = 5;
    // 卡片渲染
    oneof render {
        // 标准卡
        StandardCard standard = 6;
        // 老运营卡片（原B剪跳转卡）
        OperationCard skip = 7;
    }
    BizType biz_type = 8;
    oneof param {
        // 追番追剧参数
        BizFollowVideoParam follow = 9;
        // 预约活动参数
        BizReserveActivityParam reserve = 10;
        // 跳转参数
        BizJumpLinkParam jump = 11;
        // 预约游戏参数
        BizReserveGameParam game = 12;
    }
}

// 卡片样式
enum OperationCardType {
    CardTypeNone = 0;
    //标准卡
    CardTypeStandard = 1;
    //原跳转卡
    CardTypeSkip = 2;
}

// 标准卡
message StandardCard {
    // 卡片文案
    string title = 1;
    // 按钮文字 未操作
    string button_title = 2;
    // 按钮文字 已操作
    string button_selected_title = 3;
    // 已操作态是否显示
    bool show_selected = 4;
}

message OperationCard {
    // 开始时间（秒）
    int32 start_time = 1;
    // 结束时间（秒）
    int32 end_time = 2;
    // 图标
    string icon = 3;
    // 标题
    string title = 4;
    // 按钮文案
    string button_text = 5;
    // 跳转链接
    string url = 6;
    // 内容描述
    string content = 7;
}

//指令弹幕
message CommandDm {
    //弹幕id
    int64 id = 1;
    // oid
    int64 oid = 2;
    // mid
    int64 mid = 3;
    //弹幕指令
    string command = 4;
    //弹幕内容
    string content = 5;
    // 弹幕位置
    int32 progress = 6;
    //创建时间
    string ctime = 7;
    //修改时间
    string mtime = 8;
    // extra
    string extra = 9;
    //字符串id
    string idStr = 10;
}

message Attention {
    // 开始时间（秒）
    int32 start_time = 1;
    // 结束时间（秒）
    int32 end_time = 2;
    // 位置x坐标
    double pos_x = 3;
    // 位置y坐标
    double pos_y = 4;
}

message CustomConfig {
    string redirect_url = 1;
}

message TFPanelCustomized {
    // 右侧按钮素材
    string right_btn_img = 1;
    // 右侧按钮文案
    string right_btn_text = 2;
    // 右侧按钮字体颜色
    string right_btn_text_color = 3;
    // 右侧按钮跳转链接
    string right_btn_link = 4;
    // 中心主文案内容
    string main_label = 5;
    // 运营商（ct 电信 cu 联通 cm 移动）
    string operator = 6;
    // 子面板定制化配置，流量启播面板会冗余到上面字段中
    // 运营商独立定制面板 key 规则：{key}_{operator}，如电信流量启播面板：before_play_ct
    // 其中运营商独立定制面板优先于通用面板
    // 流量启播面板：before_play
    // 免流试看结束面板：after_free_play
    map<string, subTFPanel> sub_panel = 7;
}

message subTFPanel {
    // 右侧按钮素材
    string right_btn_img = 1;
    // 右侧按钮文案
    string right_btn_text = 2;
    // 右侧按钮字体颜色
    string right_btn_text_color = 3;
    // 右侧按钮跳转链接
    string right_btn_link = 4;
    // 中心主文案内容
    string main_label = 5;
    // 运营商
    string operator = 6;
}

message ShortFormVideoDownloadReq {
    // 视频aid
    int64 aid = 1 [(gogoproto.moretags) = 'form:"aid" validate:"required,min=1"'];
    // 视频cid
    int64 cid = 2 [(gogoproto.moretags) = 'form:"cid" validate:"required,min=1"'];
    // 用户mid
    int64 mid = 3 [(gogoproto.moretags) = 'form:"mid"'];
    // Buvid
    string buvid = 4 [(gogoproto.moretags) = 'form:"buvid"'];
    // 移动端包类型
    string mobi_app = 5 [(gogoproto.moretags) = 'form:"mobi_app" validate:"required"'];
    // 移动端版本号
    int64 build = 6 [(gogoproto.moretags) = 'form:"build" validate:"required"'];
    // 运行设备
    string device = 7 [(gogoproto.moretags) = 'form:"device"'];
    // 平台
    string platform = 8 [(gogoproto.moretags) = 'form:"platform"'];
    // spmid 当前页面
    string spmid = 9 [(gogoproto.moretags) = 'form:"spmid"'];
    // restriction
    Restriction restriction = 10 [(gogoproto.moretags) = 'form:"restriction"'];
    //tf isp
    string tf_isp = 11 [(gogoproto.moretags) = 'form:"tf_isp"'];
}

message Restriction {
    bool IsTeenagers = 1;  // 青少年模式开关状态
    bool IsLessons   = 2;  // 课堂模式开关状态
    bool IsReview    = 3;  // app审核状态，用于appstore/market审核时服务端返回数据过虑
    bool DisableRcmd = 4;  // 是否禁用个性化推荐
}

message ShortFormVideoDownloadReply {
    // 是否有下载分享按钮
    bool has_download_url = 1 [(gogoproto.jsontag) = 'has_download_url', json_name = "has_download_url"];
    // 下载链接
    string download_url = 2 [(gogoproto.jsontag) = 'download_url', json_name = "download_url"];
    // 文件md5
    string md5 = 3 [(gogoproto.jsontag) = 'md5', json_name = "md5"];
    // 文件大小
    uint64 size = 4 [(gogoproto.jsontag) = 'size', json_name = "size"];
    //备用下载链接
    string backup_download_url = 5 [(gogoproto.jsontag) = 'backup_download_url', json_name = "backup_download_url"];
}

message ClickPlayerCardReq {
    // 透传下发卡片id
    int64 id = 1;
    // 稿件aid
    int64 aid = 2;
    // 视频cid
    int64 cid = 3;
    // action 0-操作 1-取消操作
    int64 action = 4;
    // 页面标识
    string spmid = 5;
}

message ClickActivitySeasonReq {
    // 预约类型（透传view接口下发）
    BizType order_type = 1;
    // 页面标识
    string spmid = 2;
    // 业务参数（透传view接口下发）
    oneof order_param {
        // 预约活动参数
        BizReserveActivityParam reserve = 3;
        // 收藏合集参数
        BizFavSeasonParam fav_season = 4;
    }
    // action 0-操作 1-取消操作
    int64 action = 5;
}

message BizFollowVideoParam {
    // ogv seasonID
    int64 season_id = 1;
}

message BizReserveActivityParam {
    // 活动id
    int64 activity_id = 1;
    // 场景（上报用）
    string from = 2;
    // 类型（上报用）
    string type = 3;
    // 资源id（上报用）
    int64 oid = 4;
    // 预约id
    int64 reserve_id = 5;
}

message BizJumpLinkParam {
    // 链接
    string url = 1;
}

message BizReserveGameParam {
    // 游戏id
    int64 game_id = 1;
}

message BizFavSeasonParam {
    // ugc season_id
    int64 season_id = 1;
}

message SeasonReq {
    // ugc season_id
    int64 season_id = 1;
}

message SeasonReply {
    // 合集信息
    UgcSeason season = 1;
}

message ExposePlayerCardReq {
    // 卡片类型
    PlayerCardType card_type = 1;
    // 稿件id
    int64 aid = 2 [(gogoproto.moretags) = 'validate:"gt=0,required"'];
    // 视频id
    int64 cid = 3 [(gogoproto.moretags) = 'validate:"gt=0,required"'];
    // 页面标识
    string spmid = 4;
}

enum PlayerCardType {
    PlayerCardTypeNone = 0;
    //关注卡
    PlayerCardTypeAttention = 1;
    //运营卡
    PlayerCardTypeOperation = 2;
    //契约卡
    PlayerCardTypeContract = 3;
}

message AddContractReq {
    // 稿件aid
    int64 aid = 1;
    // up主mid
    int64 up_mid = 2;
    // 页面标识
    string spmid = 3;
}

// DescV2 特殊形式稿件简介
message DescV2 {
    // 文本内容
    string text = 1;
    // 文本类型
    DescType type = 2;
    // 点击跳转链接
    string uri = 3;
    // 资源ID
    int64 rid = 4;
}

// DescType 枚举-文本类型
enum DescType {
    // 占位
    DescTypeUnknown = 0;
    // 文本
    DescTypeText = 1;
    // @
    DescTypeAt = 2;
}

// 热梗配置
message BuzzwordConfig {
    string name   = 1;
    string schema = 2;
    int32 source  = 3;
    int64 start   = 4;
    int64 end     = 5;
    // 跟随播控面板展示
    bool follow_control = 6;
    // 展示配置id
    int64 id = 7;
    // 热梗ID
    int64 buzzword_id = 8;
    // schema的类型 0:NA页面 1:H5页面
    int32 schema_type = 9;
    // 热梗图
    string picture = 10;
}

enum Category {
    CategoryUnknown = 0;  // unknown
    CategorySeason  = 1;  // 付费合集
}

enum PayState {
    PayStateUnknown = 0;  // unknown
    PayStateActive  = 1;  // 已支付，生效中
}